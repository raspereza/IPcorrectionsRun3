{
  "schema_version": 2,
  "description": "IP Significance Correction for electron and muon either as prompt or as tau decay product",
  "corrections": [
    { "name": "ipsig_correction",
      "description": "IP significance correction for {lepFlav}",
      "version": 1,
      "inputs": [
        { "name": "pt",
          "type": "real",
          "description": "Reconstructed lepton pT"
        },
        { "name": "abseta",
          "type": "real",
          "description": "Reconstructed lepton abs(eta)"
        },
        { "name": "flavor",
          "type": "int",
          "description": "prompt or decay from tau : 0 - prompt, 1 - taudecay"
        },
        { "name": "syst",
          "type": "string",
          "description": "nom, up or down"
        }
      ],
      "output": {
        "name": "ipsig_correction",
        "type": "real",
        "description": "IP-Significance Correction"
      },
      "data": {
        "nodetype": "category",
        "input": "flavor",
        "content": [
          { "key": 0,
            "value": {
              "nodetype": "binning",
              "input": "abseta",
              "edges": [ 0.0, 1.0, 1.6, 2.4 ],
              "content": [
                { "nodetype": "category",
                  "input": "syst",
                  "content": [
                    { "key": "nom",
                      "value": {
                        "nodetype": "formula",
                        "expression": "[0] + [1]*min(max(x, 25.0), 150.0) + [2]*pow(min(max(x, 25.0), 150.0),2)",
                        "parser": "TFormula",
                        "variables": [ "pt" ],
                        "parameters": [ 1.1099298848031351, -0.00040456306050199093, -6.248576736802689e-07 ]
                      }
                    },
                    { "key": "up",
                      "value": {
                        "nodetype": "formula",
                        "expression": "[0] + [1]*min(max(x, 25.0), 150.0) + [2]*pow(min(max(x, 25.0), 150.0),2) + sqrt( [3] + [4]*min(max(x, 25.0), 150.0) + [5]*pow(min(max(x, 25.0), 150.0),2) + [6]*pow(min(max(x, 25.0), 150.0),3) + [7]*pow(min(max(x, 25.0), 150.0),4) )",
                        "parser": "TFormula",
                        "variables": [ "pt" ],
                        "parameters": [ 1.1099298848031351, -0.00040456306050199093, -6.248576736802689e-07, 0.0020888999062109777, -0.00012853660044059747, 2.7804520425504852e-06, -2.4646109024163282e-08, 7.820062575622897e-11 ]
                      }
                    },
                    { "key": "down",
                      "value": {
                        "nodetype": "formula",
                        "expression": "[0] + [1]*min(max(x, 25.0), 150.0) + [2]*pow(min(max(x, 25.0), 150.0),2) - sqrt( [3] + [4]*min(max(x, 25.0), 150.0) + [5]*pow(min(max(x, 25.0), 150.0),2) + [6]*pow(min(max(x, 25.0), 150.0),3) + [7]*pow(min(max(x, 25.0), 150.0),4) )",
                        "parser": "TFormula",
                        "variables": [ "pt" ],
                        "parameters": [ 1.1099298848031351, -0.00040456306050199093, -6.248576736802689e-07, 0.0020888999062109777, -0.00012853660044059747, 2.7804520425504852e-06, -2.4646109024163282e-08, 7.820062575622897e-11 ]
                      }
                    }
                  ]
                },
                { "nodetype": "category",
                  "input": "syst",
                  "content": [
                    { "key": "nom",
                      "value": {
                        "nodetype": "formula",
                        "expression": "[0] + [1]*min(max(x, 25.0), 150.0) + [2]*pow(min(max(x, 25.0), 150.0),2)",
                        "parser": "TFormula",
                        "variables": [ "pt" ],
                        "parameters": [ 1.0955172325724427, 0.0016356541755622087, -1.1044429167326554e-05 ]
                      }
                    },
                    { "key": "up",
                      "value": {
                        "nodetype": "formula",
                        "expression": "[0] + [1]*min(max(x, 25.0), 150.0) + [2]*pow(min(max(x, 25.0), 150.0),2) + sqrt( [3] + [4]*min(max(x, 25.0), 150.0) + [5]*pow(min(max(x, 25.0), 150.0),2) + [6]*pow(min(max(x, 25.0), 150.0),3) + [7]*pow(min(max(x, 25.0), 150.0),4) )",
                        "parser": "TFormula",
                        "variables": [ "pt" ],
                        "parameters": [ 1.0955172325724427, 0.0016356541755622087, -1.1044429167326554e-05, 0.0019365490300330577, -0.00011689311504005807, 2.495483517862511e-06, -2.1968721674669038e-08, 6.961576607861004e-11 ]
                      }
                    },
                    { "key": "down",
                      "value": {
                        "nodetype": "formula",
                        "expression": "[0] + [1]*min(max(x, 25.0), 150.0) + [2]*pow(min(max(x, 25.0), 150.0),2) - sqrt( [3] + [4]*min(max(x, 25.0), 150.0) + [5]*pow(min(max(x, 25.0), 150.0),2) + [6]*pow(min(max(x, 25.0), 150.0),3) + [7]*pow(min(max(x, 25.0), 150.0),4) )",
                        "parser": "TFormula",
                        "variables": [ "pt" ],
                        "parameters": [ 1.0955172325724427, 0.0016356541755622087, -1.1044429167326554e-05, 0.0019365490300330577, -0.00011689311504005807, 2.495483517862511e-06, -2.1968721674669038e-08, 6.961576607861004e-11 ]
                      }
                    }
                  ]
                },
                { "nodetype": "category",
                  "input": "syst",
                  "content": [
                    { "key": "nom",
                      "value": {
                        "nodetype": "formula",
                        "expression": "[0] + [1]*min(max(x, 25.0), 150.0) + [2]*pow(min(max(x, 25.0), 150.0),2)",
                        "parser": "TFormula",
                        "variables": [ "pt" ],
                        "parameters": [ 1.061005527320124, 0.004185674038702399, -2.2083118528889434e-05 ]
                      }
                    },
                    { "key": "up",
                      "value": {
                        "nodetype": "formula",
                        "expression": "[0] + [1]*min(max(x, 25.0), 150.0) + [2]*pow(min(max(x, 25.0), 150.0),2) + sqrt( [3] + [4]*min(max(x, 25.0), 150.0) + [5]*pow(min(max(x, 25.0), 150.0),2) + [6]*pow(min(max(x, 25.0), 150.0),3) + [7]*pow(min(max(x, 25.0), 150.0),4) )",
                        "parser": "TFormula",
                        "variables": [ "pt" ],
                        "parameters": [ 1.061005527320124, 0.004185674038702399, -2.2083118528889434e-05, 0.001736941426584126, -0.00010059671120240092, 2.1075940289365473e-06, -1.852153454187905e-08, 5.943350045455814e-11 ]
                      }
                    },
                    { "key": "down",
                      "value": {
                        "nodetype": "formula",
                        "expression": "[0] + [1]*min(max(x, 25.0), 150.0) + [2]*pow(min(max(x, 25.0), 150.0),2) - sqrt( [3] + [4]*min(max(x, 25.0), 150.0) + [5]*pow(min(max(x, 25.0), 150.0),2) + [6]*pow(min(max(x, 25.0), 150.0),3) + [7]*pow(min(max(x, 25.0), 150.0),4) )",
                        "parser": "TFormula",
                        "variables": [ "pt" ],
                        "parameters": [ 1.061005527320124, 0.004185674038702399, -2.2083118528889434e-05, 0.001736941426584126, -0.00010059671120240092, 2.1075940289365473e-06, -1.852153454187905e-08, 5.943350045455814e-11 ]
                      }
                    }
                  ]
                }
              ],
              "flow": "clamp"
            }
          },
          { "key": 1,
            "value": {
              "nodetype": "binning",
              "input": "abseta",
              "edges": [ 0.0, 1.0, 1.6, 2.4 ],
              "content": [
                { "nodetype": "category",
                  "input": "syst",
                  "content": [
                    { "key": "nom",
                      "value": {
                        "nodetype": "formula",
                        "expression": "[0] + [1]*min(max(x, 21.0), 150.0) + [2]*pow(min(max(x, 21.0), 150.0),2)",
                        "parser": "TFormula",
                        "variables": [ "pt" ],
                        "parameters": [ 0.9692254216085866, 0.0009688148077829436, -1.2654502892791037e-05 ]
                      }
                    },
                    { "key": "up",
                      "value": {
                        "nodetype": "formula",
                        "expression": "[0] + [1]*min(max(x, 21.0), 150.0) + [2]*pow(min(max(x, 21.0), 150.0),2) + sqrt( [3] + [4]*min(max(x, 21.0), 150.0) + [5]*pow(min(max(x, 21.0), 150.0),2) + [6]*pow(min(max(x, 21.0), 150.0),3) + [7]*pow(min(max(x, 21.0), 150.0),4) )",
                        "parser": "TFormula",
                        "variables": [ "pt" ],
                        "parameters": [ 0.9692254216085866, 0.0009688148077829436, -1.2654502892791037e-05, 0.007154293414191441, -0.0005801852008949869, 1.647844970293006e-05, -1.8040362636843217e-07, 6.8760417972115e-10 ]
                      }
                    },
                    { "key": "down",
                      "value": {
                        "nodetype": "formula",
                        "expression": "[0] + [1]*min(max(x, 21.0), 150.0) + [2]*pow(min(max(x, 21.0), 150.0),2) - sqrt( [3] + [4]*min(max(x, 21.0), 150.0) + [5]*pow(min(max(x, 21.0), 150.0),2) + [6]*pow(min(max(x, 21.0), 150.0),3) + [7]*pow(min(max(x, 21.0), 150.0),4) )",
                        "parser": "TFormula",
                        "variables": [ "pt" ],
                        "parameters": [ 0.9692254216085866, 0.0009688148077829436, -1.2654502892791037e-05, 0.007154293414191441, -0.0005801852008949869, 1.647844970293006e-05, -1.8040362636843217e-07, 6.8760417972115e-10 ]
                      }
                    }
                  ]
                },
                { "nodetype": "category",
                  "input": "syst",
                  "content": [
                    { "key": "nom",
                      "value": {
                        "nodetype": "formula",
                        "expression": "[0] + [1]*min(max(x, 21.0), 150.0) + [2]*pow(min(max(x, 21.0), 150.0),2)",
                        "parser": "TFormula",
                        "variables": [ "pt" ],
                        "parameters": [ 0.9641048923874964, 0.0013358737808387105, 4.1851432193848276e-07 ]
                      }
                    },
                    { "key": "up",
                      "value": {
                        "nodetype": "formula",
                        "expression": "[0] + [1]*min(max(x, 21.0), 150.0) + [2]*pow(min(max(x, 21.0), 150.0),2) + sqrt( [3] + [4]*min(max(x, 21.0), 150.0) + [5]*pow(min(max(x, 21.0), 150.0),2) + [6]*pow(min(max(x, 21.0), 150.0),3) + [7]*pow(min(max(x, 21.0), 150.0),4) )",
                        "parser": "TFormula",
                        "variables": [ "pt" ],
                        "parameters": [ 0.9641048923874964, 0.0013358737808387105, 4.1851432193848276e-07, 0.008827684044405211, -0.0007622679215827954, 2.3225416990317474e-05, -2.836279309509684e-07, 1.2801386028775422e-09 ]
                      }
                    },
                    { "key": "down",
                      "value": {
                        "nodetype": "formula",
                        "expression": "[0] + [1]*min(max(x, 21.0), 150.0) + [2]*pow(min(max(x, 21.0), 150.0),2) - sqrt( [3] + [4]*min(max(x, 21.0), 150.0) + [5]*pow(min(max(x, 21.0), 150.0),2) + [6]*pow(min(max(x, 21.0), 150.0),3) + [7]*pow(min(max(x, 21.0), 150.0),4) )",
                        "parser": "TFormula",
                        "variables": [ "pt" ],
                        "parameters": [ 0.9641048923874964, 0.0013358737808387105, 4.1851432193848276e-07, 0.008827684044405211, -0.0007622679215827954, 2.3225416990317474e-05, -2.836279309509684e-07, 1.2801386028775422e-09 ]
                      }
                    }
                  ]
                },
                { "nodetype": "category",
                  "input": "syst",
                  "content": [
                    { "key": "nom",
                      "value": {
                        "nodetype": "formula",
                        "expression": "[0] + [1]*min(max(x, 21.0), 150.0) + [2]*pow(min(max(x, 21.0), 150.0),2)",
                        "parser": "TFormula",
                        "variables": [ "pt" ],
                        "parameters": [ 1.034778355388044, 0.0001397697651571202, -2.3890182893511007e-06 ]
                      }
                    },
                    { "key": "up",
                      "value": {
                        "nodetype": "formula",
                        "expression": "[0] + [1]*min(max(x, 21.0), 150.0) + [2]*pow(min(max(x, 21.0), 150.0),2) + sqrt( [3] + [4]*min(max(x, 21.0), 150.0) + [5]*pow(min(max(x, 21.0), 150.0),2) + [6]*pow(min(max(x, 21.0), 150.0),3) + [7]*pow(min(max(x, 21.0), 150.0),4) )",
                        "parser": "TFormula",
                        "variables": [ "pt" ],
                        "parameters": [ 1.034778355388044, 0.0001397697651571202, -2.3890182893511007e-06, 0.007541250137775517, -0.0006610120466197884, 2.0199616260397795e-05, -2.420218665663751e-07, 1.056627965711068e-09 ]
                      }
                    },
                    { "key": "down",
                      "value": {
                        "nodetype": "formula",
                        "expression": "[0] + [1]*min(max(x, 21.0), 150.0) + [2]*pow(min(max(x, 21.0), 150.0),2) - sqrt( [3] + [4]*min(max(x, 21.0), 150.0) + [5]*pow(min(max(x, 21.0), 150.0),2) + [6]*pow(min(max(x, 21.0), 150.0),3) + [7]*pow(min(max(x, 21.0), 150.0),4) )",
                        "parser": "TFormula",
                        "variables": [ "pt" ],
                        "parameters": [ 1.034778355388044, 0.0001397697651571202, -2.3890182893511007e-06, 0.007541250137775517, -0.0006610120466197884, 2.0199616260397795e-05, -2.420218665663751e-07, 1.056627965711068e-09 ]
                      }
                    }
                  ]
                }
              ],
              "flow": "clamp"
            }
          }
        ]
      }
    }
  ]
}